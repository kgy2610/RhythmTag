{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë©”ì¸ í˜ì´ì§€</title>
    <link rel="stylesheet" href="{% static 'accounts/css/common.css' %}">
    <link rel="stylesheet" href="{% static 'accounts/css/login.css' %}">
</head>
<body>
    <div class="main-title">
        <img src="{% static 'accounts/images/logo.png' %}" alt="RhythmTag">
        <h1>#LOGIN</h1>
    </div>
    
    <!-- ğŸ‘‡ ì „ì²´ í¼ ì˜¤ë¥˜ë¥¼ í¼ ë°–ìœ¼ë¡œ ì´ë™ -->
    {% if form.non_field_errors %}
        <div class="form-errors">
            {% for error in form.non_field_errors %}
                <div class="error-message">
                    âš ï¸ {{ error }}
                </div>
            {% endfor %}
        </div>
    {% endif %}
    
    <div id="main-login">
        <form method="post" novalidate>
            {% csrf_token %}
            <div class="login-option">
                <p class="login-label"> {{ form.userid.label }} </p>
                <p>
                    {{ form.userid }}
                    <!-- ğŸ‘‡ í•„ë“œë³„ ì˜¤ë¥˜ ìŠ¤íƒ€ì¼ë§ ê°œì„  -->
                    {% if form.userid.errors %}
                        {% for error in form.userid.errors %}
                            <div class="field-error">
                                âŒ {{ error }}
                            </div>
                        {% endfor %}
                    {% endif %}
                </p>
            </div>
            <div class="login-option">
                <p class="login-label"> {{ form.password.label }} </p>
                <p>
                    {{ form.password }}
                    <!-- ğŸ‘‡ í•„ë“œë³„ ì˜¤ë¥˜ ìŠ¤íƒ€ì¼ë§ ê°œì„  -->
                    {% if form.password.errors %}
                        {% for error in form.password.errors %}
                            <div class="field-error">
                                âŒ {{ error }}
                            </div>
                        {% endfor %}
                    {% endif %}
                </p>
            </div>
            
            <div class="login-option buttons">
                <button type="submit">ë¡œê·¸ì¸</button>
            </div>
        </form>
    </div>
    <div id="register-btn">
        <a href="{% url 'register' %}">íšŒì›ê°€ì…</a>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ì˜¤ë¥˜ê°€ ìˆëŠ” í•„ë“œì— error í´ë˜ìŠ¤ ì¶”ê°€
            const useridField = document.querySelector('#id_userid');
            const passwordField = document.querySelector('#id_password');
            
            // í•„ë“œì— ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ ì‹œê°ì  í‘œì‹œ
            if (document.querySelector('.login-option:nth-child(2) .field-error')) {
                useridField.classList.add('error');
            }
            
            if (document.querySelector('.login-option:nth-child(3) .field-error')) {
                passwordField.classList.add('error');
            }
            
            // ì…ë ¥ ì‹œ ì˜¤ë¥˜ ìŠ¤íƒ€ì¼ ì œê±°
            useridField.addEventListener('input', function() {
                this.classList.remove('error');
                const errorDiv = this.parentNode.querySelector('.field-error');
                if (errorDiv) {
                    errorDiv.style.display = 'none';
                }
            });
            
            passwordField.addEventListener('input', function() {
                this.classList.remove('error');
                const errorDiv = this.parentNode.querySelector('.field-error');
                if (errorDiv) {
                    errorDiv.style.display = 'none';
                }
            });
        });
        </script>
</body>
</html>